<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<meta http-equiv="Content-Type" content="text/xhtml;charset=UTF-8"/>
<meta http-equiv="X-UA-Compatible" content="IE=9"/>
<meta name="generator" content="Doxygen 1.8.5"/>
<title>dfeequ: xdfeequ_examples.c File Reference</title>
<link href="tabs.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="jquery.js"></script>
<script type="text/javascript" src="dynsections.js"></script>
<link href="navtree.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="resize.js"></script>
<script type="text/javascript" src="navtree.js"></script>
<script type="text/javascript">
  $(document).ready(initResizable);
  $(window).load(resizeHeight);
</script>
<link href="doxygen.css" rel="stylesheet" type="text/css" />
<link href="HTML_custom.css" rel="stylesheet" type="text/css"/>
</head>
<body>
<div id="top"><!-- do not remove this div, it is closed by doxygen! -->
<div id="titlearea">
<table cellspacing="0" cellpadding="0">
 <tbody>
 <tr style="height: 56px;">
  <td id="projectlogo"><img alt="Logo" src="xlogo_bg.gif"/></td>
  <td style="padding-left: 0.5em;">
   <div id="projectname">dfeequ
   </div>
   <div id="projectbrief">Xilinx Vitis Drivers API Documentation</div>
  </td>
 </tr>
 </tbody>
</table>
</div>
<!-- end header part -->
<!-- Generated by Doxygen 1.8.5 -->
  <div id="navrow1" class="tabs">
    <ul class="tablist">
      <li><a href="index.html"><span>Overview</span></a></li>
      <li><a href="annotated.html"><span>Data&#160;Structures</span></a></li>
      <li><a href="globals.html"><span>APIs</span></a></li>
      <li><a href="files.html"><span>File&#160;List</span></a></li>
      <li><a href="pages.html"><span>Examples</span></a></li>
    </ul>
  </div>
</div><!-- top -->
<div id="side-nav" class="ui-resizable side-nav-resizable">
  <div id="nav-tree">
    <div id="nav-tree-contents">
      <div id="nav-sync" class="sync"></div>
    </div>
  </div>
  <div id="splitbar" style="-moz-user-select:none;"
       class="ui-resizable-handle">
  </div>
</div>
<script type="text/javascript">
$(document).ready(function(){initNavTree('xdfeequ__examples_8c.html','');});
</script>
<div id="doc-content">
<div class="header">
  <div class="summary">
<a href="#func-members">Functions</a>  </div>
  <div class="headertitle">
<div class="title">xdfeequ_examples.c File Reference</div>  </div>
</div><!--header-->
<div class="contents">
<a name="details" id="details"></a><h2 class="groupheader">Overview</h2>
<div class="textblock"><p>This file contains the examples main function. </p>
<p>Note: MGT si570 oscillator is set to 152.25MHz by default. The DFE IP wrapper requires MGT clock to be set to 122.88MHz (some IP use 61.44MHz). Prerequisite is to set the MGT si570 oscillator to the required IP before running the example code. This is for the ZCU670 production platform.</p>
<pre></pre><pre>MODIFICATION HISTORY:</pre><pre>Ver   Who    Date     Changes
</p>
<hr/>
<p>
1.0   dc     12/06/20 Initial version
      dc     04/01/21 Set mgt si570 oscillator to 122.88MHz
      dc     02/02/21 Remove hard coded device node name
      dc     02/22/21 align driver to current specification
      dc     04/06/21 Register with full node name
      dc     04/07/21 Fix bare metal initialisation
1.1   dc     07/13/21 Update to common latency requirements
      dc     07/21/21 Add and reorganise examples</pre><pre></pre> </div><table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a name="func-members"></a>
Functions</h2></td></tr>
<tr class="memitem:a0ddb0f8ca495eb4e99eabc79fc0d41d1"><td class="memItemLeft" align="right" valign="top">int&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="xdfeequ__examples_8c.html#a0ddb0f8ca495eb4e99eabc79fc0d41d1">XDfeSi570_SetMgtOscillator</a> (double CurrentFrequency, double NewFrequency)</td></tr>
<tr class="memdesc:a0ddb0f8ca495eb4e99eabc79fc0d41d1"><td class="mdescLeft">&#160;</td><td class="mdescRight">This function: initialize I2C bus, reads current state of si570, calculates parameters for si570 MGT oscillator new frequency, writes them to si570 and resets PL to use the new frequency.  <a href="#a0ddb0f8ca495eb4e99eabc79fc0d41d1">More...</a><br/></td></tr>
<tr class="separator:a0ddb0f8ca495eb4e99eabc79fc0d41d1"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:af6db33d7a9353be5cfaa65046001a7ee"><td class="memItemLeft" align="right" valign="top">int&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="xdfeequ__examples_8c.html#af6db33d7a9353be5cfaa65046001a7ee">XDfeEqu_SelfExample</a> ()</td></tr>
<tr class="memdesc:af6db33d7a9353be5cfaa65046001a7ee"><td class="mdescLeft">&#160;</td><td class="mdescRight">This function runs the DFE Equalizer device using the driver APIs.  <a href="#af6db33d7a9353be5cfaa65046001a7ee">More...</a><br/></td></tr>
<tr class="separator:af6db33d7a9353be5cfaa65046001a7ee"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a12d7169da8086c7d940094f4c468e3dd"><td class="memItemLeft" align="right" valign="top">int&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="xdfeequ__examples_8c.html#a12d7169da8086c7d940094f4c468e3dd">XDfeEqu_PassThroughExample</a> ()</td></tr>
<tr class="memdesc:a12d7169da8086c7d940094f4c468e3dd"><td class="mdescLeft">&#160;</td><td class="mdescRight">This function runs the DFE Equalizer device using the driver APIs.  <a href="#a12d7169da8086c7d940094f4c468e3dd">More...</a><br/></td></tr>
<tr class="separator:a12d7169da8086c7d940094f4c468e3dd"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a840291bc02cba5474a4cb46a9b9566fe"><td class="memItemLeft" align="right" valign="top">int&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="xdfeequ__examples_8c.html#a840291bc02cba5474a4cb46a9b9566fe">main</a> (void)</td></tr>
<tr class="memdesc:a840291bc02cba5474a4cb46a9b9566fe"><td class="mdescLeft">&#160;</td><td class="mdescRight">Main function that initialise si570 and runs examples.  <a href="#a840291bc02cba5474a4cb46a9b9566fe">More...</a><br/></td></tr>
<tr class="separator:a840291bc02cba5474a4cb46a9b9566fe"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table>
<h2 class="groupheader">Function Documentation</h2>
<a class="anchor" id="a840291bc02cba5474a4cb46a9b9566fe"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">int main </td>
          <td>(</td>
          <td class="paramtype">void&#160;</td>
          <td class="paramname"></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Main function that initialise si570 and runs examples. </p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">None.</td><td></td></tr>
  </table>
  </dd>
</dl>
<dl class="section return"><dt>Returns</dt><dd><ul>
<li>XST_SUCCESS if the example has completed successfully.</li>
<li>XST_FAILURE if the example has failed. </li>
</ul>
</dd></dl>

<p>References <a class="el" href="xdfeequ__examples_8c.html#a12d7169da8086c7d940094f4c468e3dd">XDfeEqu_PassThroughExample()</a>, <a class="el" href="xdfeequ__examples_8c.html#af6db33d7a9353be5cfaa65046001a7ee">XDfeEqu_SelfExample()</a>, and <a class="el" href="xdfeequ__examples_8c.html#a0ddb0f8ca495eb4e99eabc79fc0d41d1">XDfeSi570_SetMgtOscillator()</a>.</p>

</div>
</div>
<a class="anchor" id="a12d7169da8086c7d940094f4c468e3dd"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">int XDfeEqu_PassThroughExample </td>
          <td>(</td>
          <td class="paramname"></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>This function runs the DFE Equalizer device using the driver APIs. </p>
<p>This function does the following tasks:</p>
<ul>
<li>Create and system initialize the device driver instance.</li>
<li>Read SW and HW version numbers.</li>
<li>Reset the device.</li>
<li>Configure the device.</li>
<li>Initialize the device.</li>
<li>Set the triggers</li>
<li>Activate the device.</li>
<li>Load an equalizer coefficients.</li>
<li>DeActivate the device.</li>
</ul>
<dl class="section return"><dt>Returns</dt><dd><ul>
<li>XST_SUCCESS if the example has completed successfully.</li>
<li>XST_FAILURE if the example has failed. </li>
</ul>
</dd></dl>

<p>References <a class="el" href="struct_x_dfe_equ___trigger_cfg.html#a4bb27d0c97a24ba4f73ee2b0aa7e94f7">XDfeEqu_TriggerCfg::Activate</a>, <a class="el" href="struct_x_dfe_equ___coefficients.html#a0a153f17b53babc91ec8f87286f078f6">XDfeEqu_Coefficients::Coefficients</a>, <a class="el" href="struct_x_dfe_equ___eq_config.html#a42c1ff0831f5080a2cc3db9f90c482d6">XDfeEqu_EqConfig::DatapathMode</a>, <a class="el" href="struct_x_dfe_equ___version.html#a3c30dc13799220be1b6e67d5b6b7a20f">XDfeEqu_Version::Major</a>, <a class="el" href="struct_x_dfe_equ___version.html#a9cb8895049b445403caa7eb4db644a0d">XDfeEqu_Version::Minor</a>, <a class="el" href="struct_x_dfe_equ___trigger.html#abb1f689a1d09550f6a3a4d0e1405a94a">XDfeEqu_Trigger::Mode</a>, <a class="el" href="struct_x_dfe_equ___version.html#a7baa2749b782aeef17e8b0804135de37">XDfeEqu_Version::Patch</a>, <a class="el" href="struct_x_dfe_equ___version.html#a4536bb52d5a8f7f1837e6c1c66fd220a">XDfeEqu_Version::Revision</a>, <a class="el" href="struct_x_dfe_equ___trigger.html#a74b3104cbdfe7ddfd92b12718a97aa60">XDfeEqu_Trigger::TUSERBit</a>, <a class="el" href="struct_x_dfe_equ___trigger.html#a3a6122fa78ba07460a2bdcd3950d93dd">XDfeEqu_Trigger::TuserEdgeLevel</a>, <a class="el" href="struct_x_dfe_equ___trigger_cfg.html#ad01f760efe2299ef40a630964e36b0fe">XDfeEqu_TriggerCfg::Update</a>, <a class="el" href="group__xdfeequ__v1__1.html#gac3eedb65f956253285490a558a751862">XDfeEqu_Activate()</a>, <a class="el" href="group__xdfeequ__v1__1.html#ga8517b5d3c53f9694d03a3fe0868b3937">XDfeEqu_Configure()</a>, <a class="el" href="group__xdfeequ__v1__1.html#gace488d54e41f3d8d9179f9be9bbbef58">XDfeEqu_Deactivate()</a>, <a class="el" href="group__xdfeequ__v1__1.html#ga91f5801fc102819ea32fe8f0a40c43cb">XDfeEqu_GetVersions()</a>, <a class="el" href="group__xdfeequ__v1__1.html#ga84403d8f6f2f4e9a45668d9dc7dc5b28">XDfeEqu_Initialize()</a>, <a class="el" href="group__xdfeequ__v1__1.html#ga197062db05b1c51bc800b6a90e82838a">XDfeEqu_InstanceClose()</a>, <a class="el" href="group__xdfeequ__v1__1.html#ga57eeb135c4ee22d243462e43795fcd45">XDfeEqu_InstanceInit()</a>, <a class="el" href="group__xdfeequ__v1__1.html#gab553aa1cfced879709804331bda8c876">XDfeEqu_LoadCoefficients()</a>, <a class="el" href="group__xdfeequ__v1__1.html#ga14d48b6aa1a784e94ac55d1a8950c2bf">XDfeEqu_Reset()</a>, and <a class="el" href="group__xdfeequ__v1__1.html#ga8397193c8752e178b30f4161ebf24617">XDfeEqu_SetTriggersCfg()</a>.</p>

<p>Referenced by <a class="el" href="xdfeequ__examples_8c.html#a840291bc02cba5474a4cb46a9b9566fe">main()</a>.</p>

</div>
</div>
<a class="anchor" id="af6db33d7a9353be5cfaa65046001a7ee"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">int XDfeEqu_SelfExample </td>
          <td>(</td>
          <td class="paramname"></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>This function runs the DFE Equalizer device using the driver APIs. </p>
<p>This function does the following tasks:</p>
<ul>
<li>Create and system initialize the device driver instance.</li>
<li>Read SW and HW version numbers.</li>
<li>Reset the device.</li>
<li>Configure the device.</li>
<li>Initialize the device.</li>
<li>Activate the device.</li>
<li>DeActivate the device.</li>
</ul>
<dl class="section return"><dt>Returns</dt><dd><ul>
<li>XST_SUCCESS if the example has completed successfully.</li>
<li>XST_FAILURE if the example has failed. </li>
</ul>
</dd></dl>

<p>References <a class="el" href="struct_x_dfe_equ___eq_config.html#a42c1ff0831f5080a2cc3db9f90c482d6">XDfeEqu_EqConfig::DatapathMode</a>, <a class="el" href="struct_x_dfe_equ___version.html#a3c30dc13799220be1b6e67d5b6b7a20f">XDfeEqu_Version::Major</a>, <a class="el" href="struct_x_dfe_equ___version.html#a9cb8895049b445403caa7eb4db644a0d">XDfeEqu_Version::Minor</a>, <a class="el" href="struct_x_dfe_equ___version.html#a7baa2749b782aeef17e8b0804135de37">XDfeEqu_Version::Patch</a>, <a class="el" href="struct_x_dfe_equ___version.html#a4536bb52d5a8f7f1837e6c1c66fd220a">XDfeEqu_Version::Revision</a>, <a class="el" href="group__xdfeequ__v1__1.html#gac3eedb65f956253285490a558a751862">XDfeEqu_Activate()</a>, <a class="el" href="group__xdfeequ__v1__1.html#ga8517b5d3c53f9694d03a3fe0868b3937">XDfeEqu_Configure()</a>, <a class="el" href="group__xdfeequ__v1__1.html#gace488d54e41f3d8d9179f9be9bbbef58">XDfeEqu_Deactivate()</a>, <a class="el" href="group__xdfeequ__v1__1.html#ga91f5801fc102819ea32fe8f0a40c43cb">XDfeEqu_GetVersions()</a>, <a class="el" href="group__xdfeequ__v1__1.html#ga84403d8f6f2f4e9a45668d9dc7dc5b28">XDfeEqu_Initialize()</a>, <a class="el" href="group__xdfeequ__v1__1.html#ga197062db05b1c51bc800b6a90e82838a">XDfeEqu_InstanceClose()</a>, <a class="el" href="group__xdfeequ__v1__1.html#ga57eeb135c4ee22d243462e43795fcd45">XDfeEqu_InstanceInit()</a>, and <a class="el" href="group__xdfeequ__v1__1.html#ga14d48b6aa1a784e94ac55d1a8950c2bf">XDfeEqu_Reset()</a>.</p>

<p>Referenced by <a class="el" href="xdfeequ__examples_8c.html#a840291bc02cba5474a4cb46a9b9566fe">main()</a>.</p>

</div>
</div>
<a class="anchor" id="a0ddb0f8ca495eb4e99eabc79fc0d41d1"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">int XDfeSi570_SetMgtOscillator </td>
          <td>(</td>
          <td class="paramtype">double&#160;</td>
          <td class="paramname"><em>CurrentFrequency</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">double&#160;</td>
          <td class="paramname"><em>NewFrequency</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>This function: initialize I2C bus, reads current state of si570, calculates parameters for si570 MGT oscillator new frequency, writes them to si570 and resets PL to use the new frequency. </p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">CurrentFrequency</td><td>is MGT oscillator current frequency. </td></tr>
    <tr><td class="paramname">NewFrequency</td><td>is MGT oscillator new frequency.</td></tr>
  </table>
  </dd>
</dl>
<dl class="section return"><dt>Returns</dt><dd>None</dd></dl>
<dl class="section note"><dt>Note</dt><dd>None </dd></dl>

<p>Referenced by <a class="el" href="xdfeequ__examples_8c.html#a840291bc02cba5474a4cb46a9b9566fe">main()</a>.</p>

</div>
</div>
</div><!-- contents -->
</div><!-- doc-content -->
<div id="nav-path" class="navpath"><!-- id is needed for treeview function! -->
  <ul>
    <li class="footer">Copyright &copy; 2015 Xilinx Inc. All rights reserved.</li>
  </ul>
</div>
</body>
</html>
